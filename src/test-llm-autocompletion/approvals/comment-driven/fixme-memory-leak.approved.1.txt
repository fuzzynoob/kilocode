class EventEmitter {
  // FIXME: Memory leak - listeners not being cleaned up
  private listeners: Array<{ event: string; callback: Function }> = [];

  on(event: string, callback: Function): void {
    this.listeners.push({ event, callback });
  }

  off(event: string, callback: Function): void {
    this.listeners = this.listeners.filter(
      listener => !(listener.event === event && listener.callback === callback)
    );
  }

  removeAllListeners(event?: string): void {
    if (event) {
      this.listeners = this.listeners.filter(listener => listener.event !== event);
    } else {
      this.listeners = [];
    }
  }
}